{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\VICTUS\\\\OneDrive\\\\Desktop\\\\StudyNotion-An-Online-Education-Platform-master\\\\src\\\\components\\\\core\\\\Dashboard\\\\AddCourse\\\\PublishCourse\\\\index.jsx\";\nimport { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { editCourseDetails } from \"../../../../../services/operations/courseDetailsAPI\";\nimport { resetCourseState, setStep } from \"../../../../../slices/courseSlice\";\nimport { COURSE_STATUS } from \"../../../../../utils/constants\";\nimport IconBtn from \"../../../../common/IconBtn\";\nexport default function PublishCourse() {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    getValues\n  } = useForm();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    token\n  } = useSelector(state => state.auth);\n  const {\n    course\n  } = useSelector(state => state.course);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if ((course === null || course === void 0 ? void 0 : course.status) === COURSE_STATUS.PUBLISHED) {\n      setValue(\"public\", true);\n    }\n  }, []);\n  const goBack = () => {\n    dispatch(setStep(2));\n  };\n  const goToCourses = () => {\n    dispatch(resetCourseState());\n    navigate(\"/dashboard/my-courses\");\n  };\n  const handleCoursePublish = async () => {\n    // check if form has been updated or not\n    if ((course === null || course === void 0 ? void 0 : course.status) === COURSE_STATUS.PUBLISHED && getValues(\"public\") === true || (course === null || course === void 0 ? void 0 : course.status) === COURSE_STATUS.DRAFT && getValues(\"public\") === false) {\n      // form has not been updated\n      // no need to make api call\n      goToCourses();\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"courseId\", course._id);\n    const courseStatus = getValues(\"public\") ? COURSE_STATUS.PUBLISHED : COURSE_STATUS.DRAFT;\n    formData.append(\"status\", courseStatus);\n    setLoading(true);\n    const result = await editCourseDetails(formData, token);\n    if (result) {\n      goToCourses();\n    }\n    setLoading(false);\n  };\n  const onSubmit = data => {\n    // console.log(data)\n    handleCoursePublish();\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rounded-md border-[1px] border-richblack-700 bg-richblack-800 p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-2xl font-semibold text-richblack-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \"Publish Settings\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-6 mb-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"public\",\n    className: \"inline-flex items-center text-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    type: \"checkbox\",\n    id: \"public\"\n  }, register(\"public\"), {\n    className: \"border-gray-300 h-4 w-4 rounded bg-richblack-500 text-richblack-400 focus:ring-2 focus:ring-richblack-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-2 text-richblack-400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Make this course as public\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-auto flex max-w-max items-center gap-x-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: loading,\n    type: \"button\",\n    onClick: goBack,\n    className: \"flex cursor-pointer items-center gap-x-2 rounded-md bg-richblack-300 py-[8px] px-[20px] font-semibold text-richblack-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(IconBtn, {\n    disabled: loading,\n    text: \"Save Changes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"names":["useEffect","useState","useForm","useDispatch","useSelector","useNavigate","editCourseDetails","resetCourseState","setStep","COURSE_STATUS","IconBtn","PublishCourse","register","handleSubmit","setValue","getValues","dispatch","navigate","token","state","auth","course","loading","setLoading","status","PUBLISHED","goBack","goToCourses","handleCoursePublish","DRAFT","formData","FormData","append","_id","courseStatus","result","onSubmit","data","React","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","Object","assign","type","id","disabled","onClick","text"],"sources":["C:/Users/VICTUS/OneDrive/Desktop/StudyNotion-An-Online-Education-Platform-master/src/components/core/Dashboard/AddCourse/PublishCourse/index.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { useForm } from \"react-hook-form\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { useNavigate } from \"react-router-dom\"\n\nimport { editCourseDetails } from \"../../../../../services/operations/courseDetailsAPI\"\nimport { resetCourseState, setStep } from \"../../../../../slices/courseSlice\"\nimport { COURSE_STATUS } from \"../../../../../utils/constants\"\nimport IconBtn from \"../../../../common/IconBtn\"\n\nexport default function PublishCourse() {\n  const { register, handleSubmit, setValue, getValues } = useForm()\n\n  const dispatch = useDispatch()\n  const navigate = useNavigate()\n  const { token } = useSelector((state) => state.auth)\n  const { course } = useSelector((state) => state.course)\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    if (course?.status === COURSE_STATUS.PUBLISHED) {\n      setValue(\"public\", true)\n    }\n  }, [])\n\n  const goBack = () => {\n    dispatch(setStep(2))\n  }\n\n  const goToCourses = () => {\n    dispatch(resetCourseState())\n    navigate(\"/dashboard/my-courses\")\n  }\n\n  const handleCoursePublish = async () => {\n    // check if form has been updated or not\n    if (\n      (course?.status === COURSE_STATUS.PUBLISHED &&\n        getValues(\"public\") === true) ||\n      (course?.status === COURSE_STATUS.DRAFT && getValues(\"public\") === false)\n    ) {\n      // form has not been updated\n      // no need to make api call\n      goToCourses()\n      return\n    }\n    const formData = new FormData()\n    formData.append(\"courseId\", course._id)\n    const courseStatus = getValues(\"public\")\n      ? COURSE_STATUS.PUBLISHED\n      : COURSE_STATUS.DRAFT\n    formData.append(\"status\", courseStatus)\n    setLoading(true)\n    const result = await editCourseDetails(formData, token)\n    if (result) {\n      goToCourses()\n    }\n    setLoading(false)\n  }\n\n  const onSubmit = (data) => {\n    // console.log(data)\n    handleCoursePublish()\n  }\n\n  return (\n    <div className=\"rounded-md border-[1px] border-richblack-700 bg-richblack-800 p-6\">\n      <p className=\"text-2xl font-semibold text-richblack-5\">\n        Publish Settings\n      </p>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        {/* Checkbox */}\n        <div className=\"my-6 mb-8\">\n          <label htmlFor=\"public\" className=\"inline-flex items-center text-lg\">\n            <input\n              type=\"checkbox\"\n              id=\"public\"\n              {...register(\"public\")}\n              className=\"border-gray-300 h-4 w-4 rounded bg-richblack-500 text-richblack-400 focus:ring-2 focus:ring-richblack-5\"\n            />\n            <span className=\"ml-2 text-richblack-400\">\n              Make this course as public\n            </span>\n          </label>\n        </div>\n\n        {/* Next Prev Button */}\n        <div className=\"ml-auto flex max-w-max items-center gap-x-4\">\n          <button\n            disabled={loading}\n            type=\"button\"\n            onClick={goBack}\n            className=\"flex cursor-pointer items-center gap-x-2 rounded-md bg-richblack-300 py-[8px] px-[20px] font-semibold text-richblack-900\"\n          >\n            Back\n          </button>\n          <IconBtn disabled={loading} text=\"Save Changes\" />\n        </div>\n      </form>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}